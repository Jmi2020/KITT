# KITTY Orchestrator — .env (example)
USER_NAME=Jeremiah
PRIMARY_LOCALE=en-US
# VERBOSITY SCALE
# 1: extremely terse
# 2: concise
# 3: detailed (default)
# 4: comprehensive
# 5: exhaustive and nuanced detail
VERBOSITY=3
OFFLINE_MODE=true
CONFIDENCE_THRESHOLD=0.80
BUDGET_PER_TASK_USD=0.50
API_OVERRIDE_PASSWORD=omega
HAZARD_CONFIRMATION_PHRASE=Confirm: proceed
TOPIC_PREFIX=kitty
ZONES=welding_bay,printer_bay,laser_room,warehouse
# ==============================================================================
# Real-time Reasoning & Routing Logging
# ==============================================================================
# Enhanced logging for tracking model routing decisions and agent reasoning
# Set to DEBUG to see detailed thinking process, INFO for key decisions only
# Logs show: tier selection, confidence scores, tool use, agent steps

# ML-Ready JSONL Logging (for training and analysis)
# ==============================================================================
# JSONL format: each log entry is a single JSON object on one line
# - Lightweight: compresses 5-10x with gzip
# - ML-ready: load into pandas/PyTorch/HuggingFace datasets
# - Full structured data: prompts, responses, confidence, cost, latency, metadata
# Usage:
#   from brain.logging_config import load_jsonl_logs, analyze_routing_performance
#   logs = load_jsonl_logs(".logs/reasoning.jsonl")
#   stats = analyze_routing_performance(".logs/reasoning.jsonl")
REASONING_JSONL_FILE=.logs/reasoning.jsonl
REASONING_LOG_LEVEL=DEBUG
REASONING_LOG_FILE=.logs/reasoning.log


LLAMACPP_HOST=http://host.docker.internal:8080
LLAMACPP_N_PREDICT=512
LLAMACPP_TEMPERATURE=0.7
LLAMACPP_TOP_P=0.95
LLAMACPP_REPEAT_PENALTY=1.1
LLAMACPP_TIMEOUT=120

# ==============================================================================
# llama.cpp Model Configuration (OPTIONAL)
# ==============================================================================
# These fields are OPTIONAL. You can use KITTY in two ways:
#
# Option 1 (Recommended): Use Model Manager TUI
#   - Start models dynamically: kitty-model-manager tui
#   - Switch models on the fly
#   - No .env configuration needed
#
# Option 2: Auto-bootstrap from .env
#   - Configure paths below for automatic model loading
#   - Useful for automation/CI environments
#
# If these are empty and no server is running, you'll get a helpful error
# message with instructions.
# ==============================================================================
LLAMACPP_MODELS_DIR=/Users/Shared/Coding/models
LLAMACPP_PRIMARY_MODEL=Qwen2.5-72B-Instruct-GGUF/qwen2.5-72b-instruct-q4_k_m-00001-of-00012.gguf
LLAMACPP_PRIMARY_ALIAS=kitty-primary
LLAMACPP_CODER_MODEL=Qwen2.5-Coder-32B-Instruct-GGUF/qwen2.5-coder-32b-instruct-q4_k_m.gguf
LLAMACPP_CODER_ALIAS=kitty-coder
LLAMACPP_CTX=8192
# GPU Optimization: Offload all layers to Metal GPU (was 1, now 999 = all layers)
# Expected impact: 10-30x performance improvement, GPU utilization 5% → 70-85%
LLAMACPP_N_GPU_LAYERS=999
# Thread count: Use P-core count (20 on Mac Studio M3 Ultra) instead of all logical cores
LLAMACPP_THREADS=20
LLAMACPP_FLASH_ATTN=1
# Batch configuration for GPU occupancy and throughput
# -b (batch): Prefill batch size for prompt ingestion (larger = better GPU utilization)
# --ubatch (micro-batch): Kernel tiling size (tune for memory bandwidth)
LLAMACPP_BATCH_SIZE=4096
LLAMACPP_UBATCH_SIZE=1024
# Parallel streams: Number of concurrent sequences (key lever for decode GPU usage)
# Start at 6, tune up to 8-12 if memory allows and GPU has headroom
LLAMACPP_PARALLEL=6
LLAMACPP_EXTRA_ARGS=

LOCAL_MODEL_PRIMARY=kitty-primary
LOCAL_MODEL_CODER=kitty-coder

# Admin authentication (bcrypt hashes recommended)
# Generate with: python -c "from common.security import hash_password; print(hash_password('changeme'))"
ADMIN_USERS=admin:$2b$12$DUMMYPLACEHOLDER0123456789abcdefghijklmnopqrstu

# Optional: shared voice prompt/system instructions (use single-line or escaped newlines)
VOICE_SYSTEM_PROMPT="KITTY default system prompt goes here"

# Home Assistant Integration
# Auto-discover: python ops/scripts/discover-homeassistant.py --update-env
# Manual: Set the base URL and generate a long-lived access token from HA
HOME_ASSISTANT_BASE_URL=http://homeassistant.local:8123
HOME_ASSISTANT_URL=http://homeassistant.local:8123
HOME_ASSISTANT_TOKEN=
# Optional: Enable auto-discovery on startup (default: false)
HOME_ASSISTANT_AUTO_DISCOVER=false
# Optional: Discovery timeout in seconds (default: 5.0)
HOME_ASSISTANT_DISCOVERY_TIMEOUT=5.0

# MCP Tool Servers (for Agentic Workflows)
# CAD service URL for generate_cad_model tool
CAD_SERVICE_URL=http://cad:8200
# Memory service URL for semantic memory (already set via MEM0_MCP_URL)
# MEM0_MCP_URL is set in Docker Compose
# Enable agentic mode with tool calling (default: false)
AGENTIC_MODE_ENABLED=false
# Maximum iterations for ReAct agent (default: 10)
REACT_MAX_ITERATIONS=10

OPENAI_API_KEY=***
ANTHROPIC_API_KEY=***
GOOGLE_API_KEY=***
PERPLEXITY_API_KEY=***

# CAD Service Configuration
# Zoo.dev KittyCAD API for parametric CAD generation
ZOO_API_BASE=https://api.zoo.dev
ZOO_API_KEY=***
# Tripo AI for image-to-mesh generation
TRIPO_API_BASE=https://api.tripo.ai
TRIPO_API_KEY=***
# MinIO S3-compatible object store for CAD artifacts
# Leave MINIO_ACCESS_KEY and MINIO_SECRET_KEY empty to use local filesystem fallback
MINIO_ENDPOINT=http://minio:9000
MINIO_BUCKET=kitty-artifacts
MINIO_ACCESS_KEY=
MINIO_SECRET_KEY=
# Local mesh generation script (TripoSR/InstantMesh)
LOCAL_MESH_SCRIPT=/opt/mesh/generate.sh
# FreeCAD fallback command
FREECAD_CMD=freecad

OBJECT_STORE=file:///srv/kitty/artifacts
VECTOR_DB=http://vector-db:6333
BRAIN_API=http://brain-api:8080
TOOL_ROUTER=http://tool-router:8080
MQTT_URL=mqtt://event-bus:1883

# Notifications
# Twilio SMS notifications (optional)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_FROM_NUMBER=
TWILIO_TO_NUMBER=

# ntfy.sh - Free push notifications to all devices (iOS, Android, Web)
# Create a unique topic name (e.g., kitty-jeremiah-workshop)
# Download app: https://ntfy.sh/ or use ntfy.sh web interface
NTFY_TOPIC=
NTFY_SERVER=https://ntfy.sh
NTFY_PRIORITY=default
NTFY_TAGS=robot,tools

# Pushover - Reliable push notifications ($5 one-time per platform)
# Sign up at https://pushover.net
PUSHOVER_USER_KEY=
PUSHOVER_API_TOKEN=

# Pushcut - iOS automation and notifications
# Get from https://www.pushcut.io
PUSHCUT_SECRET=
PUSHCUT_NOTIFICATION_NAME=

# iMessage - Built-in, syncs to all Apple devices (no app needed!)
# Use your iCloud email or phone number
IMESSAGE_RECIPIENT=your.email@icloud.com

# Enable/disable notification channels
NOTIFICATIONS_ENABLED=true
NOTIFICATIONS_SMS_ENABLED=false
NOTIFICATIONS_MACOS_ENABLED=true
NOTIFICATIONS_IMESSAGE_ENABLED=false
NOTIFICATIONS_NTFY_ENABLED=false
NOTIFICATIONS_PUSHOVER_ENABLED=false
NOTIFICATIONS_PUSHCUT_ENABLED=false
